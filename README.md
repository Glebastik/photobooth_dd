# üì∏ –£–ª—É—á—à–µ–Ω–Ω–∞—è –§–æ—Ç–æ–±—É–¥–∫–∞ I/O

[![Photo Booth Header][logo]][photo_booth_link]

[![io_photobooth][build_status_badge]][workflow_link]
![coverage][coverage_badge]
[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

–§–æ—Ç–æ–±—É–¥–∫–∞, —Å–æ–∑–¥–∞–Ω–Ω–∞—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [Flutter][flutter_link] –∏ [Firebase][firebase_link], —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Linux –∏ –∫–∏–æ—Å–∫-—Ä–µ–∂–∏–º–∞.

**üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üá∑üá∫ **–†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- üì∑ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–∞–º–µ—Ä** - USB/–≤–µ–±-–∫–∞–º–µ—Ä—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- üñ®Ô∏è **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–Ω—Ç–µ—Ä–æ–º** - –ø–µ—á–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —á–µ—Ä–µ–∑ CUPS
- üñ•Ô∏è **–ö–∏–æ—Å–∫-—Ä–µ–∂–∏–º** - –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- üêß **Linux —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚öôÔ∏è **Systemd —Å–µ—Ä–≤–∏—Å** - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

*–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ [Very Good Ventures][very_good_ventures_link] –≤ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–µ —Å Google*

*–†–∞—Å—à–∏—Ä–µ–Ω–æ –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ü§ñ*

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–µ–±-–≤–µ—Ä—Å–∏—è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```sh
$ flutter run -d chrome
```

### Linux Desktop
–î–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Linux:

```sh
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
$ ./build_linux.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å
$ sudo ./install_linux.sh
```

_üìã –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Linux —Å–º. –≤ [LINUX_DEPLOYMENT.md](LINUX_DEPLOYMENT.md)_

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö unit –∏ widget —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```sh
$ flutter test --coverage --test-randomize-ordering-seed random
```

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [lcov](https://github.com/linux-test-project/lcov):

```sh
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
$ genhtml coverage/lcov.info -o coverage/
# –û—Ç–∫—Ä—ã—Ç–∏–µ –æ—Ç—á–µ—Ç–∞
$ open coverage/index.html
```

---

## üåê –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [flutter_localizations][flutter_localizations_link] –∏ —Å–ª–µ–¥—É–µ—Ç [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É –ø–æ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ Flutter][internationalization_link].

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

1. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –ª–æ–∫–∞–ª–∏–∑—É–µ–º–æ–π —Å—Ç—Ä–æ–∫–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `app_ru.arb` –≤ `lib/l10n/arb/app_ru.arb`:

```arb
{
    "@@locale": "ru",
    "counterAppBarTitle": "–°—á–µ—Ç—á–∏–∫",
    "@counterAppBarTitle": {
        "description": "–¢–µ–∫—Å—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ AppBar —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—á–µ—Ç—á–∏–∫–∞"
    }
}
```

2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ:

```arb
{
    "@@locale": "ru",
    "counterAppBarTitle": "–°—á–µ—Ç—á–∏–∫",
    "@counterAppBarTitle": {
        "description": "–¢–µ–∫—Å—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ AppBar —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—á–µ—Ç—á–∏–∫–∞"
    },
    "helloWorld": "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!",
    "@helloWorld": {
        "description": "–¢–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è"
    }
}
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É:

```dart
import 'package:io_photobooth/l10n/l10n.dart';

@override
Widget build(BuildContext context) {
  final l10n = context.l10n;
  return Text(l10n.helloWorld);
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

1. –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π –ª–æ–∫–∞–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π ARB —Ñ–∞–π–ª –≤ `lib/l10n/arb/`.

```
‚îú‚îÄ‚îÄ l10n
‚îÇ   ‚îú‚îÄ‚îÄ arb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app_en.arb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app_ru.arb
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_es.arb
```

2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–∂–¥—ã–π `.arb` —Ñ–∞–π–ª:

`app_en.arb`

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    }
}
```

`app_ru.arb`

```arb
{
    "@@locale": "ru",
    "counterAppBarTitle": "–°—á–µ—Ç—á–∏–∫",
    "@counterAppBarTitle": {
        "description": "–¢–µ–∫—Å—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ AppBar —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—á–µ—Ç—á–∏–∫–∞"
    }
}
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **`EnhancedPhotobooth`** - —É–ª—É—á—à–µ–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Ñ–æ—Ç–æ–±—É–¥–∫–∏ —Å –∫–∏–æ—Å–∫-—Ä–µ–∂–∏–º–æ–º
- **`CameraService`** - —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–∞–º–∏ (USB/–≤–µ–±-–∫–∞–º–µ—Ä—ã)
- **`PrinterService`** - —Å–µ—Ä–≤–∏—Å –ø–µ—á–∞—Ç–∏ —á–µ—Ä–µ–∑ CUPS
- **`LanguageSelector`** - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤
- **`LocalizedApp`** - –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

- ‚úÖ **Web** - –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è
- ‚úÖ **Linux Desktop** - –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å systemd
- ‚úÖ **Windows Desktop** - –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **macOS Desktop** - –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `photobooth.conf`:

```ini
[display]
fullscreen=true
width=1920
height=1080

[camera]
default_camera_index=0
photo_width=1920
photo_height=1080

[kiosk]
enable_kiosk_mode=true
auto_start_delay=5
idle_timeout=300
```

---

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Linux
- Ubuntu 20.04+ / Debian 11+ / Fedora 35+
- 2GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB+)
- USB –∫–∞–º–µ—Ä–∞ –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞
- –ü—Ä–∏–Ω—Ç–µ—Ä, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å CUPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# Ubuntu/Debian
sudo apt install -y curl git unzip xz-utils zip libglu1-mesa

# Fedora
sudo dnf install -y curl git unzip xz zip mesa-libGLU
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Linux
```bash
git clone https://github.com/Glebastik/photobooth_dd.git
cd photobooth_dd
./build_linux.sh
sudo ./install_linux.sh
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
```bash
sudo systemctl status photobooth    # —Å—Ç–∞—Ç—É—Å
sudo systemctl restart photobooth   # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo journalctl -u photobooth -f    # –ª–æ–≥–∏
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [LINUX_DEPLOYMENT.md](LINUX_DEPLOYMENT.md)
- üêõ **–ë–∞–≥–∏**: [GitHub Issues](https://github.com/Glebastik/photobooth_dd/issues)
- üí¨ **–û–±—Å—É–∂–¥–µ–Ω–∏—è**: [GitHub Discussions](https://github.com/Glebastik/photobooth_dd/discussions)

[build_status_badge]: https://github.com/flutter/photobooth/actions/workflows/main.yaml/badge.svg
[coverage_badge]: coverage_badge.svg
[firebase_link]: https://firebase.google.com/
[flutter_link]: https://flutter.dev
[flutter_localizations_link]: https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html
[google_io_link]: https://events.google.com/io/
[blog_link]: https://medium.com/flutter/how-its-made-i-o-photo-booth-3b8355d35883
[internationalization_link]: https://flutter.dev/docs/development/accessibility-and-localization/internationalization
[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg
[license_link]: https://opensource.org/licenses/MIT
[logo]: art/header.png
[photo_booth_link]: https://photobooth.flutter.dev
[very_good_analysis_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg
[very_good_analysis_link]: https://pub.dev/packages/very_good_analysis
[very_good_cli_link]: https://github.com/VeryGoodOpenSource/very_good_cli
[very_good_ventures_link]: https://verygood.ventures/
[workflow_link]: https://github.com/flutter/photobooth/actions/workflows/main.yaml
